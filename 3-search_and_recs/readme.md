# Bare-metal версия
### 1) Подгрузка демо-данных

Для начала скачайте необходимые данные по следующей ссылке:
[Скачать data.zip](https://storage.yandexcloud.net/shl2025/2-qdrant/data.zip)

После скачивания распакуйте архив в папку `3-search-and-recs` вашего проекта:

```bash
unzip data.zip -d 2-qdrant
```

Это обеспечит доступ к данным, которые будут использованы для индексации в Qdrant.

---

### 2) Запуск Qdrant с помощью Docker

Для запуска Qdrant используем Docker. В корне проекта выполните команду:

```bash
docker-compose up
```

После этого Qdrant будет запущен, и вы сможете получить доступ к админке через браузер по адресу:
[http://localhost:6333/dashboard](http://localhost:6333/dashboard)

---

### 3) Индексация данных

Теперь нужно проиндексировать данные. Для этого запустите скрипт индексации:

```bash
python3 index_products.py
```

Этот процесс создаст индекс в Qdrant, который будет использоваться для поиска товаров.

---

### 4) Запуск сервера

Для запуска сервера, который будет обслуживать запросы, используем команду с `uvicorn`:

```bash
python3 search_products.py
```

Эта команда запускает сервер с функцией автоматической перезагрузки, что удобно для разработки. Вы можете работать как с обычной моделью, так и с finetuned моделью, указав нужный параметр.

---

### 5) Просмотр результатов в браузере

После запуска сервера вы можете просмотреть результаты в браузере, перейдя по следующему адресу:
[http://localhost:8000](http://localhost:8000)

Здесь будет доступен интерфейс для поиска и просмотра продуктов, используя индексы Qdrant.

---

### 6) Fine-Tuning модели

После того как основной сервер запущен, вы можете начать процедуру дообучения модели. Для этого выполните команду:

```bash
python3 fine_tune.py
```

Этот скрипт запускает процесс fine-tuning на основе вашей модели, чтобы улучшить точность результатов поиска или рекомендаций.

---

### 7) Индексация fine-tuned модели

После завершения fine-tuning, необходимо проиндексировать обновленную модель. Для этого выполните команду:

```bash
python3 index_products_finetuned.py
```

Эта команда обновит индекс в Qdrant с использованием fine-tuned модели.

---

### 8) Просмотр результатов  работы fine-tuned модели

После того как индексация завершена, вы можете посмотреть результаты работы fine-tuned модели в браузере по следующему адресу:
[http://localhost:8000/finetuned](http://localhost:8000/finetuned)

Здесь будут отображаться результаты, улучшенные с учетом дообученной модели.

### 9) Запуск сервера рекомендаций 
```bash
python3 recomendations.py
```

# Docker версия
Для запуска через Docker, чтобы избежать проблем с зависимостями и окружением, выполните следующие шаги:
Используйте образ, из предыдущего задания
запускайте из корневой папки через 
ARM64 версия
```bash
docker run --network=host -v .:/app shl2025:arm64 python3 3-search_and_recs/index_products.py
```
AMD64 версия
```bash
docker run --network=host -v .:/app shl2025:amd64 python3 3-search_and_recs/index_products.py
```


Запуск сервера
ARM64 версия
```bash
 docker run  -p 8002:8002 -v .:/app shl2025:arm64 python3 3-search_and_recs/search_products.py
```
AMD64 версия
```bash
 docker run  -p 8002:8002 -v .:/app shl2025:amd64 python3 3-search_and_recs/search_products.py
```
После запуска сервера, вы сможете получить доступ к интерфейсу поиска:


## Запуск сервера рекомендаций

ARM64 версия
```bash
docker run  -p 8002:8002 -v .:/app shl2025:arm64 python3 3-search_and_recs/recomendations.py   
```
AMD64 версия
```bash
docker run  -p 8002:8002 -v .:/app shl2025:amd64 python3 3-search_and_recs/recomendations.py   
```





